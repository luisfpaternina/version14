<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">

        <record id="bim_security_rules_category" model="ir.module.category">
            <field name="name">BIM</field>
            <field name="description">BIM Project Access Rules</field>
            <field name="sequence" eval="90"/>
        </record>

        <record id="bim_security_extra_rules_category" model="ir.module.category">
            <field name="name">BIM EXTRA</field>
            <field name="description">Project Extra Access Rules</field>
            <field name="sequence" eval="91"/>
        </record>

        <record id="group_user_bim" model="res.groups">
            <field name="name">BIM User see owner documents</field>
            <field name="category_id" ref="bim_security_rules_category"/>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
        </record>

        <record id="group_user_bim_all" model="res.groups">
            <field name="name">BIM User see all documents</field>
            <field name="category_id" ref="bim_security_rules_category"/>
            <field name="implied_ids" eval="[(4, ref('group_user_bim'))]"/>
        </record>

        <record id="group_bim_maintenance" model="res.groups">
            <field name="name">BIM Technical Service</field>
            <field name="category_id" ref="bim_security_extra_rules_category"/>
            <field name="comment">Technical service</field>
        </record>

        <record id="group_bim_integrations" model="res.groups">
            <field name="name">BIM Integrations</field>
            <field name="category_id" ref="bim_security_extra_rules_category"/>
        </record>

        <record id="group_bim_sat" model="res.groups">
            <field name="name">BIM SAT</field>
            <field name="category_id" ref="bim_security_extra_rules_category"/>
        </record>

        <record id="group_budget_concept_documents" model="res.groups">
            <field name="name">See budget and concept in documents</field>
            <field name="category_id" ref="bim_security_extra_rules_category"/>
        </record>

        <record id="group_employee_bim" model="res.groups">
            <field name="name">Construction Employees</field>
            <field name="category_id" ref="bim_security_extra_rules_category"/>
        </record>

        <record id="group_attendance_bim" model="res.groups">
            <field name="name">Bim Attendance</field>
            <field name="category_id" ref="bim_security_extra_rules_category"/>
        </record>

        <record id="group_see_cost_bim" model="res.groups">
            <field name="name">Bim Costs</field>
            <field name="category_id" ref="bim_security_extra_rules_category"/>
        </record>

        <record id="group_special_configuration" model="res.groups">
            <field name="name">Special configurations and rectifications</field>
            <field name="category_id" ref="bim_security_extra_rules_category"/>
        </record>

        <record id="group_manager_bim" model="res.groups">
            <field name="name">BIM Manager</field>
            <field name="users" eval="[(4, ref('base.user_admin'))]"/>
            <field name="category_id" ref="bim_security_rules_category"/>
            <field name="implied_ids" eval="[(4, ref('base_bim_2.group_user_bim')),(4, ref('base_bim_2.group_bim_maintenance')),
                                            (4, ref('base_bim_2.group_bim_integrations')),(4, ref('base_bim_2.group_bim_sat')), (4, ref('base_bim_2.group_user_bim_all'))]"/>
         </record>


        <!-- Reglas de Acceso -->
        <record id="rule_see_all_projects" model="ir.rule">
            <field name="name">See all Projects</field>
            <field ref="model_bim_project" name="model_id"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim_all'))]"/>
        </record>

        <record id="rule_see_all_budgets" model="ir.rule">
            <field name="name">See all Budgets</field>
            <field ref="model_bim_budget" name="model_id"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim_all'))]"/>
        </record>

        <record id="rule_see_all_paid_state" model="ir.rule">
            <field name="name">See all Paid State</field>
            <field ref="model_bim_paidstate" name="model_id"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim_all'))]"/>
        </record>

        <record id="rule_see_all_object" model="ir.rule">
            <field name="name">See all Paid State</field>
            <field ref="model_bim_object" name="model_id"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim_all'))]"/>
        </record>

        <record id="rule_see_all_object" model="ir.rule">
            <field name="name">See all Paid State</field>
            <field ref="model_bim_object" name="model_id"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim_all'))]"/>
        </record>

        <record id="rule_see_all_stages" model="ir.rule">
            <field name="name">See all Stages</field>
            <field ref="model_bim_budget_stage" name="model_id"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim_all'))]"/>
        </record>

        <record id="rule_see_all_spaces" model="ir.rule">
            <field name="name">See only my all Spaces</field>
            <field ref="model_bim_budget_space" name="model_id"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim_all'))]"/>
        </record>

        <record id="rule_see_all_attendance" model="ir.rule">
            <field name="name">See only my all Attendances</field>
            <field ref="hr_attendance.model_hr_attendance" name="model_id"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim_all'))]"/>
        </record>

        <record id="rule_see_all_massive_certification" model="ir.rule">
            <field name="name">See all Certifications</field>
            <field ref="model_bim_massive_certification_by_line" name="model_id"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim_all'))]"/>
        </record>

        <record id="rule_see_all_massive_certification_chapter" model="ir.rule">
            <field name="name">See only my Projects Certifications Chapter</field>
            <field ref="model_bim_massive_chapter_certification" name="model_id"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim_all'))]"/>
        </record>

        <record id="rule_see_all_project_employee_hour" model="ir.rule">
            <field name="name">See all Employee Hours</field>
            <field ref="model_bim_project_employee" name="model_id"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim_all'))]"/>
        </record>

        <record id="rule_see_all_import" model="ir.rule">
            <field name="name">See all Imports</field>
            <field ref="model_bim_import_temp" name="model_id"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim_all'))]"/>
        </record>

        <record id="rule_see_all_check_list" model="ir.rule">
            <field name="name">See all Check List</field>
            <field ref="model_bim_checklist" name="model_id"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim_all'))]"/>
        </record>

        <record id="rule_see_all_quality_control" model="ir.rule">
            <field name="name">See all Quality Control</field>
            <field ref="model_bim_quality_control_plan" name="model_id"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim_all'))]"/>
        </record>

        <!--See owner-->
        <record id="rule_see_owner_project" model="ir.rule">
            <field name="name">See only my Projects</field>
            <field ref="model_bim_project" name="model_id"/>
            <field name="domain_force">['|',('user_id', '=', user.id),('user_id', '=', False)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim'))]"/>
        </record>

        <record id="rule_see_owner_quality_control" model="ir.rule">
            <field name="name">See only my Quality Control</field>
            <field ref="model_bim_quality_control_plan" name="model_id"/>
            <field name="domain_force">['|','|',('project_id', 'in', user.bim_project_ids.ids),('user_id', '=', user.id),('user_id', '=', False)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim'))]"/>
        </record>

        <record id="rule_see_owner_budget" model="ir.rule">
            <field name="name">See only my Budgets</field>
            <field ref="model_bim_budget" name="model_id"/>
            <field name="domain_force">['|','|',('project_id', 'in', user.bim_project_ids.ids),('user_id', '=', user.id),('user_id', '=', False)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim'))]"/>
        </record>

        <record id="rule_see_owner_paid_state" model="ir.rule">
            <field name="name">See only my Projects Paid State</field>
            <field ref="model_bim_paidstate" name="model_id"/>
            <field name="domain_force">['|','|',('project_id', 'in', user.bim_project_ids.ids),('user_id', '=', user.id),('user_id', '=', False)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim'))]"/>
        </record>

        <record id="rule_see_owner_object" model="ir.rule">
            <field name="name">See only my Projects Objects</field>
            <field ref="model_bim_object" name="model_id"/>
            <field name="domain_force">['|','|',('project_id', 'in', user.bim_project_ids.ids),('user_id', '=', user.id),('user_id', '=', False)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim'))]"/>
        </record>

        <record id="rule_see_owner_stages" model="ir.rule">
            <field name="name">See only my Projects Stages</field>
            <field ref="model_bim_budget_stage" name="model_id"/>
            <field name="domain_force">[('project_id', 'in', user.bim_project_ids.ids)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim'))]"/>
        </record>

        <record id="rule_see_owner_spaces" model="ir.rule">
            <field name="name">See only my Projects Spaces</field>
            <field ref="model_bim_budget_space" name="model_id"/>
            <field name="domain_force">['|',('project_id', '=', False),('project_id', 'in', user.bim_project_ids.ids)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim'))]"/>
        </record>

        <record id="rule_see_owner_attendance" model="ir.rule">
            <field name="name">See only my Projects Attendances</field>
            <field ref="hr_attendance.model_hr_attendance" name="model_id"/>
            <field name="domain_force">['|',('project_id', '=', False),('project_id', 'in', user.bim_project_ids.ids)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim'))]"/>
        </record>

        <record id="rule_see_owner_project_employee" model="ir.rule">
            <field name="name">See only my Projects Employee</field>
            <field ref="model_bim_project_employee" name="model_id"/>
            <field name="domain_force">['|',('project_id', '=', False),('project_id', 'in', user.bim_project_ids.ids)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim'))]"/>
        </record>

        <record id="rule_see_owner_massive_certification" model="ir.rule">
            <field name="name">See only my Projects Certifications</field>
            <field ref="model_bim_massive_certification_by_line" name="model_id"/>
            <field name="domain_force">['|','|',('project_id', 'in', user.bim_project_ids.ids),('user_id', '=', user.id),('user_id', '=', False)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim'))]"/>
        </record>

        <record id="rule_see_owner_massive_certification_chapter" model="ir.rule">
            <field name="name">See only my Projects Certifications Chapter</field>
            <field ref="model_bim_massive_chapter_certification" name="model_id"/>
            <field name="domain_force">['|','|',('project_id', 'in', user.bim_project_ids.ids),('user_id', '=', user.id),('user_id', '=', False)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim'))]"/>
        </record>


        <record id="rule_see_owner_import" model="ir.rule">
            <field name="name">See only my Imports</field>
            <field ref="model_bim_import_temp" name="model_id"/>
            <field name="domain_force">['|','|',('project_id', 'in', user.bim_project_ids.ids),('user_id', '=', user.id),('user_id', '=', False)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim'))]"/>
        </record>

        <record id="rule_see_owner_check_list" model="ir.rule">
            <field name="name">See only my Check List</field>
            <field ref="model_bim_checklist" name="model_id"/>
            <field name="domain_force">['|','|',('project_id', 'in', user.bim_project_ids.ids),('user_id', '=', user.id),('user_id', '=', False)]</field>
            <field name="groups" eval="[(4, ref('group_user_bim'))]"/>
        </record>




        <!--Multicompany rules-->
        <record id="rule_multicompany_project" model="ir.rule">
            <field name="name">Multi Company Projects</field>
            <field ref="model_bim_project" name="model_id"/>
            <field name="domain_force">['|',('company_id','=',False),('company_id','in', company_ids)]</field>
            <field name="global" eval="1"/>
        </record>

        <record id="rule_multicompany_budget" model="ir.rule">
            <field name="name">Multi Company Budgets</field>
            <field ref="model_bim_budget" name="model_id"/>
            <field name="domain_force">['|',('company_id','=',False),('company_id','in', company_ids)]</field>
            <field name="global" eval="1"/>
        </record>

        <record id="rule_multicompany_maintenance" model="ir.rule">
            <field name="name">Multi Company Maintenance</field>
            <field ref="model_bim_maintenance" name="model_id"/>
            <field name="domain_force">['|',('company_id','=',False),('company_id','in', company_ids)]</field>
            <field name="global" eval="1"/>
        </record>



        <!--


        <record id="group_employee_bim" model="res.groups">
            <field name="name">Construction Employees</field>
            <field name="category_id" ref="bim_security_rules_category"/>
        </record>


        <record id="group_requisition_purchase" model="res.groups">
            <field name="name">Materials Request from Purchasing</field>
            <field name="users" eval="[(4, ref('base.user_admin'))]"/>
            <field name="category_id" ref="bim_security_rules_category"/>
        </record>

        <record id="group_create_invoice_paidstate" model="res.groups">
            <field name="name">Generate invoices from payment statuses</field>
            <field name="users" eval="[(4, ref('base.user_admin'))]"/>
            <field name="category_id" ref="bim_security_rules_category"/>
        </record>

        <record id="group_create_product_import_budget" model="res.groups">
            <field name="name">Create a product when importing a quote</field>
            <field name="users" eval="[(4, ref('base.user_admin'))]"/>
            <field name="category_id" ref="bim_security_rules_category"/>
        </record>

        <record id="group_rectify_products" model="res.groups">
            <field name="name">Rectification of products in budgets</field>
            <field name="users" eval="[(4, ref('base.user_admin'))]"/>
            <field name="category_id" ref="bim_security_rules_category"/>
        </record>-->


        <!--

        <record id="rule_see_all_imports" model="ir.rule">
            <field name="name">See all import jobs</field>
            <field ref="model_bim_import_temp" name="model_id"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_see_all'))]"/>
        </record>

        <record id="rule_see_owner_import" model="ir.rule">
            <field name="name">See only my import jobs</field>
            <field ref="model_bim_import_temp" name="model_id"/>
            <field name="domain_force">['|',('budget_id.project_id.user_id', '=', user.id),('budget_id.project_id.user_id', '=', False)]</field>
            <field name="groups" eval="[(4, ref('group_see_owner'))]"/>
        </record>

        <record id="rule_multicompany_department" model="ir.rule">
            <field name="name">Multi Company Departments</field>
            <field ref="model_bim_department" name="model_id"/>
            <field name="domain_force">['|',('company_id','=',False),('company_id','in', company_ids)]</field>
            <field name="global" eval="1"/>
        </record>

        <record id="rule_multicompany_documentation" model="ir.rule">
            <field name="name">Multi Company Discounts</field>
            <field ref="model_bim_documentation" name="model_id"/>
            <field name="domain_force">['|',('company_id','=',False),('company_id','in', company_ids)]</field>
            <field name="global" eval="1"/>
        </record>

        <record id="rule_multicompany_paidstate" model="ir.rule">
            <field name="name">Multi Company Payment Status</field>
            <field ref="model_bim_paidstate" name="model_id"/>
            <field name="domain_force">['|',('company_id','=',False),('company_id','in', company_ids)]</field>
            <field name="global" eval="1"/>
        </record>

        <record id="rule_multicompany_requisition" model="ir.rule">
            <field name="name">Multi Company Material Requests</field>
            <field ref="model_bim_purchase_requisition" name="model_id"/>
            <field name="domain_force">['|',('company_id','=',False),('company_id','in', company_ids)]</field>
            <field name="global" eval="1"/>
        </record>

        <record id="rule_multicompany_listproduct" model="ir.rule">
            <field name="name">Multi Company Product Requests</field>
            <field ref="model_product_list" name="model_id"/>
            <field name="domain_force">['|',('company_id','=',False),('company_id','in', company_ids)]</field>
            <field name="global" eval="1"/>
        </record>

        <record id="rule_multicompany_maintenance" model="ir.rule">
            <field name="name">Multi Company Maintenance</field>
            <field ref="model_bim_maintenance" name="model_id"/>
            <field name="domain_force">['|',('company_id','=',False),('company_id','in', company_ids)]</field>
            <field name="global" eval="1"/>
        </record>

        <record id="rule_multicompany_maintenance_line" model="ir.rule">
            <field name="name">Multi Company Maintenance Lines</field>
            <field ref="model_bim_maintenance" name="model_id"/>
            <field name="domain_force">['|',('company_id','=',False),('company_id','in', company_ids)]</field>
            <field name="global" eval="1"/>
        </record>

        <record id="rule_multicompany_maintenance" model="ir.rule">
            <field name="name">Multi Company Maintenance</field>
            <field ref="model_bim_project_employee_timesheet" name="model_id"/>
            <field name="domain_force">['|',('company_id','=',False),('company_id','in', company_ids)]</field>
            <field name="global" eval="1"/>
        </record>

        <record id="rule_multicompany_maintenance_line" model="ir.rule">
            <field name="name">Multi Company Maintenance Lines</field>
            <field ref="model_bim_project_employee" name="model_id"/>
            <field name="domain_force">['|',('company_id','=',False),('company_id','in', company_ids)]</field>
            <field name="global" eval="1"/>
        </record>

        <record id="rule_multicompany_maintenance" model="ir.rule">
            <field name="name">Multi Company Maintenance</field>
            <field ref="model_bim_project_employee" name="model_id"/>
            <field name="domain_force">['|',('company_id','=',False),('company_id','in', company_ids)]</field>
            <field name="global" eval="1"/>
        </record>

        <record id="rule_multicompany_maintenance_line" model="ir.rule">
            <field name="name">Multi Company Maintenance Lines</field>
            <field ref="model_bim_project_employee_timesheet" name="model_id"/>
            <field name="domain_force">['|',('company_id','=',False),('company_id','in', company_ids)]</field>
            <field name="global" eval="1"/>
        </record>-->
    </data>
</odoo>
